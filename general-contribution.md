General contribution guide
=============================================

This document is the single source for technical contribution guide for all the projects and repos cross the Pinglue org. Some of these instructions may seem simple and trivial, but be assured that they are super important stuff and ignoring them cause a lot of confusion for everyone. Please read carefully and follow. Please bear in mind that most of the instructions below are common cross all open source communities in the world and even among commercial software companies and are not specific to our org. But we reiterate all these instructions for the sake of completeness.   

> **Note:** If you find some of these points not making sense, or have an alternative suggestion, or are aware of a better solution, then share it with us for sure (through issues and/or discussions) - We definitely want to improve our common protocols which benefits all the contributors. These rules are laid out best to our knowledge and are subject to continuos improvement.

## DO NOT USE linter, prettier or other similar tools inside your IDE!!!
they will re-indent you code and produce lot of unnecessary diffs that make code review impossible! We will use a cli lint for our projects for sure, but individual lints/prettier produce issues. TURN THEM OFF! NOW! RIGHT NOW! If you use VScode (which you should) go to extensions part, search for lint, prettier, etc and disable all those extensions. Make sure your changes are your *hand-made* changes, not generated by any auto linter/beautifier.

## Set your tab size to 4
Tab sizes are either set to 2 or 4 in different IDEs/editors. Now every time there are more than one programmers in a project, some of them use tab size 2 and the other tab size 4! The result is different indentations which, in short tim, make the code amazingly messy!! So lets agree on a fixed tab size. **Use tab size 4**. In addition to this verbal demand, we also use some more tech-friendly solutions; for example most of our repos should have a *.vscode* folder which sets your vscode tab size to 4. 

* If your vscode still has a different tab size, then contact us (make issue or through discussions). We want to solve this problem once and for all
* If a repo doesn't have it, well make a PR for that! 
* If you use another popular IDE (like WebStorm, vim, etc.) then make a PR with its local settings folder which sets tab size to 4

## Learn about git!
Obviously we are using git and you need to have a good understanding of git, its commands, its mechanism. You cannot escape it, this is one of our core/main tools before any other tool. So learn it.

There are tons of good resources out there. We don't teach git here but we have a few summary/gist/resources for git:

1. [Quick start](https://pinglue.github.io/dev-guides/git/quick-start)
2. [Save your email privacy](https://pinglue.github.io/dev-guides/git/commit-email-privacy) (this is important!)

As for external resources: we recommend [Atlassian](https://www.atlassian.com/git/tutorials/setting-up-a-repository) tutorial, particularly *Getting started* and *collaborating* sections. But it is worth to go through the whole deck if you have time, it is worth it.

## See a typo in documents or error i na task? Please make a PR!
In open source the final product is the result of all contributors work. Everybody can change anything. There is no restriction or boundary here. The products belong to all. So if you see something is wrong somewhere (for example a typo in a doc, a wrong instruction in a tutorial) then make a PR or create an issue to discuss. These activities definitely count towards your overall merit in an open source community. 

## Communication
Communication is important. Specially for the org members it is important to communicate for any issue or problem. In particular: if you don't understand the task assigned to you properly **please ask questions!!** Don't go by guess and conjecture. Asking question is not bad, it does not mean you lack understanding! Exact reverse: it means you are indeed detailed oriented and responsible person. During these asking questions you (or we) might find some new aspects of the task and some mistakes and errors may be identified related to the task. If you see some potential issue with task itself speak it up, the task itself could be faulty, ot there could be better ways to do it. Always discuss and consult. That being said, please read the task description carefully before asking questions; for sometimes the questions are due to an incomplete study of the task description. Also, questions related to the basics of programming or common framework, question such as how to push a change to git repository or how to define an interface in typescript are beyond our scope to answer. The answer to these questions can be found in introductory tutorials and/or websites like StackOverflow. We like to focus on questions/discussions with direct relation to our projects.

## How/where to pickup tasks as beginner?
Ok now you are ready to contribute, but where to start? The starting point for new contributors is the issues with the tag `good first issue`. Starting from our [org page](https://github.com/pinglue), you may go to our repos (*pg-repo* and *pgweb-repo* are usually the most active ones for collaboration) and see their issues. Pick a `good first issue` and MAKE SURE IT IS NOT ASSIGNED TO ANYONE ELSE! (check the *assignees* section on the right side menu). 

The please leave a comment on the issue that you want to take this task and some contributor will get back to you. This contributor is basically the person who guides you through the tasks (answering questions and reviewing your code, etc.). He or she will be called the *task-buddy* as if. Now if you are stuck, or not sure what to do with this task please feel free to ask for more context and guidance, we definitely want to help! So just leave comments in the issue and your task-buddy as well as other community members will try to help. 

The contribution itself is done through the regular GitHub workflow (fork the repo -> commit -> make PR -> reviews -> merge PR). Some more hints are given below, but in general you are expected to know (or self-learn) git workflow, it's a basic developer skill these days.   

## Task size and deadline
The size of the task is usually given at the end of its title separated by a dash. For example a task with title `do this and that - 2x` is of size 2, and small tasks would look like `do this and that - 20%` which means this task is of size one fifth. If no such number is given then the size of the task is 1. The size (roughly) indicates the number of days/hours it takes to do the task but it depends on the developer as well. 

Regarding deadline, the general rule is each task is due in three days plus its size. For example the task `do this and that - 2x` is due in 5 days since it is assigned. Small tasks (size less than 1) are due in 3 days. But bear in mind that these deadlines are not strict rules, if you need more time leave comment and discuss it with your task-buddy. As long as you communicate and have not disappeared it should be fine. But if someone takes a task and disappears for 5 days overdue without any communication then we may assume he/she gave up the task and then we will reassign the task to someone else. While we try to be flexible, the tasks need to be done in timely manner since other tasks depend and awaiting on them.

Cannot do the task? No problem, just communicate it on the comment and let us assign it to someone else. You can pick another task that is more align with your interest. Do not torture yourself (and us) on a task that you are not ready for yet.


## Git workflow 
We are following a git branch model similar to the so-called [git workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow). Make sure you understand the general idea. A short summary of how you work on a task would look like this:

1. you are assigned a task which is usually a Github issue (either you assigned yourself or you are assigned by a project member, either way)

2. You should work on this task in a *separate branch*. So please create a new branch for your task. The name of the branch should have the format *task-type/task-name*, where *task-type* is either `build|ci|docs|feat|fix|perf|refactor|test` (for more info on these standard names refer to [here](https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-format)) Most tasks use the type feat or bug though. The *task-name* should be ideally the name of the issue in kebab case. For example, if your issue title is "Add left sidebar 20%" then your branch could be called feature/add-left-sidebar ... note that the name is the kebab-case of the issue title (dropping the story value 20% or other technical values) which makes the branch even more related to the issue you are working with. 

3. Work on the your task. feel free to make several commits and push them to the remote repo (see the commit rules below). Don't forget to occasionally sync your branch with the main. Don't be afraid of branch conflicts, learn to resolve them, it is easy! Choose relevant titles for your commits, they become part of the repo history. Your commit message should describe what you have done briefly; but no need to make it like a long report/changelog. 

4. For commit names we use a common format in git explained [this guide](https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-format). In our case only the header is required and the body and footer can be dropped if the header is clear enough. The header format is:

(citation: https://github.com/angular/angular/blob/master/CONTRIBUTING.md)
```
<type>([scope]): <short summary>
  │       │             │
  │       │             └─⫸ Summary in present tense. Not capitalized. No period at the end.
  │       │
  │       └─⫸ Commit Scope: the package name affected like `pinglue`, 
  |                         `@pinglue/cli`, `pgweb/server-pl`, etc.
  │
  └─⫸ Commit Type: build|ci|docs|feat|fix|perf|refactor|test
```

- `type` is required and is one of the following:
    * **build**: Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm)
    * **ci**: Changes to our CI configuration files and scripts (examples: CircleCi, SauceLabs)
    * **docs**: Documentation only changes
    * **feat**: A new feature
    * **fix**: A bug fix
    * **perf**: A code change that improves performance
    * **refactor**: A code change that neither fixes a bug nor adds a feature
    * **test**: Adding missing tests or correcting existing tests

- `scope` is the name of the package you change (like `pinglue`, `@pinglue/cli`, `pgweb/server-pl`, etc.). If your change is general and is not limited to a single package then you may drop the scope.

- `summary` is the a short description of what you committed. All small letters. No period at the end.

5. Lint your code before commit. For js/ts based projects, all packages come with a lint (oe eslint) script which lints your source code inside the package. The general rule is that you should lint your code before pushing it in into the repo. This helps unified style, and also elimination of unnecessary diffs as discussed above to some extend. More details on linting process is given for each repo. If not sure please ask.

6. You are done? Make sure your changes pass all the tests. The details about testing are given in the repositories, but usually they are as easy as running the script `npm run test` in the project root and it should be all green passed. 

7. Make a pull request (aka. PR) from your branch to the main branch. You can use Github website for this. Use the same name as your branch for the PR as it is informative enough (if you are making PR from a fork repo then ignore this rule, use a name following the rules stated above for branch names)

8. **Most important!** Link the PR to the issue you were working on. If you are using Github to make the pull request, you can find the option for linking the PR to an issue on the right side of the form. This linking tells us that this PR is related to this task. Additionally, once the PR is accepted and merged, the task will be automatically closed (otherwise we have to close it manually) 99% of people forget to do this though. So make it a habit that never make a dangling PR (meaning a PR not linked to any issue), unless you are an external contributor and are making a PR for a new suggestion. 

9. Ask someone for your PR review. making PR itself may not send notification to us, nobody may know you made a PR! So pick your project admin or someone you are working with and they will receive notification. 

10. Once people review your PR, they will leave comments and then send the review to you. You will receive notifications for this. Read the reviews and apply them. If you have question about any review comment you can comment back. Feel free to discuss, the reviewer might be wrong or misunderstood. feel free to make additional commits to your branch to apply the suggestions. NO NEED TO CREATE A NEW PR! As you commit changes to your branch the PR will be updated automatically. FYI, *PR is a request to merge a branch into another branch. Your branch is a collection of the commits you made. So if you more commits they all become part of the PR* 

11. When you PR is finally accepted, it can be merged. Either the reviewer will merge the PR himself or will ask you to do so. Either way the PR will be merged. 

12. Delete the branch. Do not reuse a branch for several task. Usually the person who merges the PR should remember to delete the merging branch after the merge has taken place. In case that the person who is doing the merge forgets to delete your branch and you notice it please delete your old branch. Your next task requires a new one.


## Typedoc your code
We don't want heavily documented code, but doc it when it make sense. In particular, *typedoc* notations are very useful for they can help in building the API reference guide. For more info see the [typedoc guide](https://typedoc.org/guides/doccomments/).




