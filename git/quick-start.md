Quick start with Git
================================

> DO NOT USE linter, prettier or other similar tools inside your IDE!!! they will re-indent you code and produce lot of unnecessary diffs that make code review impossible! We will use a cli lint for our projects for sure, but individual lints/prettier produce issues. TURN THEM OFF! NOW! RIGHT NOW! If you use VScode (which you should) go to extensions part, search for lint, prettier, etc and disable all those extensions. Make sure your changes are your *hand-made* changes, not generated by any auto linter/beautifier.

### To clone a repo:

Just get the https address of your repo and go like:

```shell

# clone it
git clone https://github.com/pinglue/monorepo.git

# go to it!
cd monorepo

```

### To clone a certain branch

Clone your repo like normal if haven't done so.

Now say you want a branch called *feature/add-search-filters*

from your repo root:
```shell
git checkout feature/add-search-filters
```

Note: If this is the firs time checking out the branch `feature/add-search-filters` (i.e., it does not exist on your local repo before) then you need to track it along with checkout:

```shell
git checkout --track origin/feature/add-search-filters
```


### Branches

With command `git checkout` you can switch between branches. Before doing a task make sure you are in the right branch. To double-check which branch you are in, from the project root run:

```shell
git branch
```

The above command shows a list of branches downloaded, and the current branch has a * beside it.


### Commit/Push changes
Once you made your changes you need to push the changes to the repository. From the project root folder:

```
git add .
git commit -m "your commit message"
git push
```

AT this point you may need to enter username/password

>**NOTE:** Github no longer accepts username/password like before. You need to use *token* now. The easiest way to use a token is to get the token from the Github site (make sure you check all the privileges just in case) and use this token instead of your password when using the terminal.

>**TIP:** If you use VScode, the Github extension on it will automatically takes care of token and authentication (after a few rounds of referrings back and forth to the Github site, etc), and after that it magically connects to the repo and you can push/pull/etc with just a click. You wanna use VSCode for normal git operations


### Downloading the latest changes into your branch

To download the latest changes from the online repository (upstream repo) to your local repo use the following command from the project root:

```
git pull
```

The above command is useful if you have an old clone of the repository and some changes are made to the online repo after your cloning. In this case use the above command instead of cloning a whole new project.

If your local branch is updated with the remote one then it tells you that `your branch is up to dated` or some message like this.

### Syncing

Sometimes it may so happen that while you are working on your branch we push/merge some new changes in the main branch. To get these changes in your branch there are two ways:


1. If you have not pushed any commits from your branch to the remote branch then you can *rebase* you branch on top of the *main* branch. 

```bash
# making sure you are in your branch, assuming your branch name is feature/adding-ng-guard
git checkout feature/adding-ng-guard

# fetching (downloading) latest changes from the repo
git fetch

# rebase your branch to the main branch
git rebase origin/main

```

or you can combine the last two commands into one:

```bash
git checkout feature/adding-ng-guard
git pull --rebase origin main
```

If conflicts happen, then the above command shows a list of conflicted files. These files will contain "conflict-markers". You need to open these files using some IDE editor (like VS code or WebStorm) and these editors will show you the conflicting parts and ask you to choose one of the possible options for each conflict (by clicking on buttons) or both of them or you can even delete them all and write a manual third option for the conflicting part. Once you are done save your files. Then commit your new changes:

```shell
git add .
git commit -m "conflict resolution"
```

2. If you already some commits in the remote then you need to merge the *main* branch into your branch. This method creates an additional commit in your branch and that is why method 1 explained above is preferred to this method. But if you already have some pushed commits then this method is your only way:

```shell
# go to your branch
git checkout my-branch

# download the latest changes
git fetch

# merge with main
git merge main

# resolve the conflicts similar to method 1 explained above. save the conflicting files after changes

# commit the conflict resolution changes
git add .
git commit -m "conflict resolution"
```

Either of above methods make your branch up-to-date with the main, and in case of a an accepted PR it becomes possible to merge. 